---

# https://docs.docker.com/engine/installation/linux/docker-ce/debian/

- apt: name={{ item }} state=latest
  with_items:
    - aufs-tools
    - lxc
    - apt-transport-https
    - ca-certificates

- apt_key: url=https://download.docker.com/linux/debian/gpg state=present

- apt_repository: repo='deb [arch=amd64] https://download.docker.com/linux/debian jessie stable' state=present update_cache=yes

# Ignore the warning: "ï»¿[WARNING]: Consider using apt module rather than running apt-get", apt module will not purge
# if the package does not exist, now it will just run without failure.
- shell: apt-get purge lxc-docker*

- shell: apt-get purge docker.io*

- apt: name=docker-ce state=latest

- service: name=docker state=started enabled=yes

# Test: sudo docker run hello-world

- pip: name=docker-compose
